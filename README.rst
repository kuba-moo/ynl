TODO:
 - take care of removing assoc on socket close
